<% /* views/partials/navbar.ejs */ %>
<header class="nvx-header" dir="rtl">
  <div class="nvx-container">
    <!-- Ø§Ù„Ø¹Ù„Ø§Ù…Ø©/Ø§Ù„Ù„ÙˆØ¬Ùˆ -->
    <a class="nvx-brand" href="/" aria-label="Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©">
      <span class="nvx-brand-mark" aria-hidden="true">ðŸŒ¿</span>
      <span class="nvx-brand-name">Ù…Ø²Ø±Ø¹ØªÙŠ</span>
    </a>

    <!-- Ø±ÙˆØ§Ø¨Ø· Ø¹Ø§Ù…Ø© (ØªØ¸Ù‡Ø± Ù„Ù„Ø¬Ù…ÙŠØ¹) -->
    <nav class="nvx-links" aria-label="Ø±ÙˆØ§Ø¨Ø· Ø¹Ø§Ù…Ø©">
      <a class="nvx-link" href="/">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
      <a class="nvx-link" href="/about">Ù…Ù† Ù†Ø­Ù†</a>
      <a class="nvx-link" href="/sale">Ù…Ø²Ø§Ø±Ø¹ Ù„Ù„Ø¨ÙŠØ¹</a>
      <a class="nvx-link" href="/rent">Ù…Ø²Ø§Ø±Ø¹ Ù„Ù„Ø¥ÙŠØ¬Ø§Ø±</a>
      <a class="nvx-link" href="/contractors">Ø§Ù„Ù…Ù‚Ø§ÙˆÙ„ÙˆÙ†</a>
      <a class="nvx-link" href="/bundles">Ù…Ø¬Ù…ÙˆØ¹Ø§Øª Ø§Ù„Ø£Ø±Ø§Ø¶ÙŠ</a>
    </nav>

    <!-- Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª (ØªØ®ØªÙ„Ù Ø­Ø³Ø¨ Ø­Ø§Ù„Ø© Ø§Ù„Ø¯Ø®ÙˆÙ„) -->
    <div class="nvx-actions">
      <% if (!isAuth) { %>
        <a class="nvx-btn nvx-btn--ghost" href="/login">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</a>
        <a class="nvx-btn nvx-btn--primary" href="/signup">Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯</a>
      <% } else { %>
        <a class="nvx-link" href="/plans">Ø§Ù„Ø§Ø´ØªØ±Ø§ÙƒØ§Øª</a>
        <% if (isAdmin) { %>
          <a class="nvx-badge" href="/admin">Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</a>
        <% } else if (isContractor) { %>
          <a class="nvx-badge" href="/dashboard/contractor">Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ù‚Ø§ÙˆÙ„</a>
        <% } else if (isOwner) { %>
          <a class="nvx-badge" href="/dashboard/owner">Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø§Ù„Ùƒ</a>
        <% } else { %>
          <a class="nvx-badge" href="/profile">Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</a>
        <% } %>
        <form class="nvx-logout" action="/logout" method="post">
          <button type="submit" class="nvx-linklike">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</button>
        </form>
      <% } %>
    </div>
    <!-- Ø²Ø± Ø§Ù„Ù‡Ø§Ù…Ø¨Ø±ØºØ± -->
    <button class="nvx-toggle" aria-label="ÙØªØ­ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©" aria-controls="nvx-mobile" aria-expanded="false">
  <span class="nvx-burger" aria-hidden="true"></span>
</button>

  </div>
  <!-- Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬ÙˆØ§Ù„ -->
  <div id="nvx-mobile" class="nvx-mobile" hidden>
    <nav class="nvx-mobile-nav" aria-label="Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬ÙˆØ§Ù„">
      <!-- Ù†ÙØ³ Ø§Ù„Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ø¹Ø§Ù…Ø© -->
      <a class="nvx-mobile-link" href="/">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
       <a class="nvx-link" href="/about">Ù…Ù† Ù†Ø­Ù†</a>
      <a class="nvx-mobile-link" href="/sale">Ù…Ø²Ø§Ø±Ø¹ Ù„Ù„Ø¨ÙŠØ¹</a>
      <a class="nvx-mobile-link" href="/rent">Ù…Ø²Ø§Ø±Ø¹ Ù„Ù„Ø¥ÙŠØ¬Ø§Ø±</a>
      <a class="nvx-mobile-link" href="/contractors">Ø§Ù„Ù…Ù‚Ø§ÙˆÙ„ÙˆÙ†</a>
      <a class="nvx-mobile-link" href="/bundles">Ù…Ø¬Ù…ÙˆØ¹Ø§Øª Ø§Ù„Ø£Ø±Ø§Ø¶ÙŠ</a>

      <hr class="nvx-sep">

      <% if (!isAuth) { %>
        <a class="nvx-mobile-btn nvx-mobile-btn--ghost" href="/login">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</a>
        <a class="nvx-mobile-btn nvx-mobile-btn--primary" href="/signup">Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯</a>
      <% } else { %>
        <a class="nvx-mobile-link" href="/plans">Ø§Ù„Ø§Ø´ØªØ±Ø§ÙƒØ§Øª</a>
        <% if (isAdmin) { %>
          <a class="nvx-mobile-link nvx-mobile-link--accent" href="/admin">Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</a>
        <% } else if (isContractor) { %>
          <a class="nvx-mobile-link nvx-mobile-link--accent" href="/dashboard/contractor">Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ù‚Ø§ÙˆÙ„</a>
        <% } else if (isOwner) { %>
          <a class="nvx-mobile-link nvx-mobile-link--accent" href="/dashboard/owner">Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø§Ù„Ùƒ</a>
        <% } else { %>
          <a class="nvx-mobile-link nvx-mobile-link--accent" href="/profile">Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</a>
        <% } %>
        <form class="nvx-mobile-logout" action="/logout" method="post">
          <button type="submit" class="nvx-mobile-linklike">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</button>
        </form>
      <% } %>
    </nav>
  </div>
</header>

<style>
/* ===== NVX NAVBAR (RTL-ready, namespaced) ===== */
.nvx-header{position:sticky;top:0;z-index:100;background:#fff;border-bottom:1px solid #e5e7eb}
.nvx-container{max-width:1200px;margin:0 auto;padding:10px 16px;display:flex;align-items:center;gap:12px}
.nvx-brand{display:flex;align-items:center;gap:8px;font-weight:700;color:#0b1a13;text-decoration:none;white-space:nowrap}
.nvx-brand-mark{font-size:1.1rem}
.nvx-brand-name{font-size:1.05rem}

.nvx-links{display:flex;align-items:center;gap:12px;margin-inline-start:18px}
.nvx-link{color:#0b1a13;text-decoration:none;padding:6px 8px;border-radius:8px}
.nvx-link:hover{background:#f3f4f6}

.nvx-actions{margin-inline-start:auto;display:flex;align-items:center;gap:12px}
.nvx-badge{background:#0b1a13;color:#fff;text-decoration:none;padding:6px 10px;border-radius:999px}
.nvx-btn{padding:6px 10px;border-radius:10px;text-decoration:none;display:inline-block}
.nvx-btn--primary{background:#22c55e;color:#0b1a13;font-weight:600;border:1px solid #16a34a}
.nvx-btn--ghost{border:1px solid #e5e7eb;color:#0b1a13;background:#fff}
.nvx-linklike{background:none;border:none;padding:6px 8px;color:#ef4444;cursor:pointer}
.nvx-logout{display:inline}

.nvx-toggle{display:none;width:40px;height:40px;align-items:center;justify-content:center;background:#fff;border:1px solid #e5e7eb;border-radius:10px}
.nvx-toggle-bar{display:block;width:22px;height:2px;background:#0b1a13;border-radius:2px}
.nvx-toggle-bar+.nvx-toggle-bar{margin-top:4px}

/* Mobile panel */
.nvx-mobile{border-top:1px solid #e5e7eb;background:#fff}
.nvx-mobile-nav{display:grid;padding:8px 16px}
.nvx-mobile-link{padding:10px 8px;border-radius:8px;text-decoration:none;color:#0b1a13}
.nvx-mobile-link:hover{background:#f3f4f6}
.nvx-mobile-link--accent{font-weight:600}
.nvx-mobile-btn{padding:10px 8px;border-radius:10px;text-align:center;text-decoration:none;margin-top:6px}
.nvx-mobile-btn--primary{background:#22c55e;color:#0b1a13;font-weight:600;border:1px solid #16a34a}
.nvx-mobile-btn--ghost{border:1px solid #e5e7eb;background:#fff;color:#0b1a13}
.nvx-mobile-linklike{background:none;border:1px solid #fee2e2;color:#b91c1c;border-radius:8px;padding:10px;margin-top:8px;cursor:pointer}
.nvx-sep{border:none;border-top:1px dashed #e5e7eb;margin:6px 0}

/* Responsive */
@media (max-width: 1040px){
  .nvx-links{display:none}
  .nvx-actions{display:none}
  .nvx-toggle{display:inline-flex; width:44px; height:44px; align-items:center; justify-content:center;
  background:#fff; border:1px solid #e5e7eb; border-radius:10px; }

.nvx-burger{
  position:relative;
  width:24px; height:2px;
  background:#0b1a13; border-radius:2px;
}
.nvx-burger::before, .nvx-burger::after{
  content:""; position:absolute; left:0;
  width:24px; height:2px; background:#0b1a13; border-radius:2px;
}
.nvx-burger::before{ top:-6px; }
.nvx-burger::after { top: 6px; }
}


</style>

<script>
(function(){
  const btn  = document.querySelector('.nvx-toggle');
  const menu = document.getElementById('nvx-mobile');
  if (!btn || !menu) return;

  const close = () => {
    if (!menu.hasAttribute('hidden')) menu.setAttribute('hidden','');
    btn.setAttribute('aria-expanded','false');
  };
  const toggle = () => {
    const open = !menu.hasAttribute('hidden');
    if (open) { menu.setAttribute('hidden',''); } else { menu.removeAttribute('hidden'); }
    btn.setAttribute('aria-expanded', String(!open));
  };
  btn.addEventListener('click', toggle);
  // Ø§ØºÙ„Ù‚ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø£ÙŠ Ø±Ø§Ø¨Ø·/Ø²Ø± Ø¯Ø§Ø®Ù„Ù‡Ø§
  menu.addEventListener('click', (e)=>{
    const a = e.target.closest('a,button');
    if (a) close();
  });
  // Ø§ØºÙ„Ù‚ Ø¹Ù†Ø¯ ØªÙˆØ³Ø¹Ø© Ø§Ù„Ø´Ø§Ø´Ø© Ù„Ù„Ø¯ÙŠØ³ÙƒØªÙˆØ¨
  const mq = window.matchMedia('(min-width: 1041px)');
  mq.addEventListener?.('change', ()=>{ if (mq.matches) close(); });
})();
</script>
