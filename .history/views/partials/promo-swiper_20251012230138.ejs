<%
/**
 * متوقع أن تصِل:
 * bannersDoc: { enabled:Boolean, items:[{img,title,text,link,btn}] }
 */
const _doc = (typeof bannersDoc!=='undefined' && bannersDoc) ? bannersDoc : { enabled:false, items:[] };
const _items = Array.isArray(_doc.items) ? _doc.items : [];
const _enabled = !!_doc.enabled && _items.length > 0;
%>
<% if (_enabled) { %>
<style>
  .promo-swiper{border-radius:16px;overflow:hidden}
  .promo-slide{position:relative;height:320px;background:#0b1a13;color:#fff}
  .promo-medi{position:absolute;inset:0}
  .promo-medi img{width:100%;height:100%;object-fit:cover;filter:brightness(.88)}
  .promo-overlay{position:absolute;inset:0;background:linear-gradient(90deg,rgba(0,0,0,.45),rgba(0,0,0,.2) 45%, rgba(0,0,0,0))}
  .promo-body{position:relative;z-index:2;display:flex;align-items: center;justify-content: center; gap:.5rem;padding:1.1rem;width: 100%;height:100%;}
  .promo-title{margin:.2rem 0 0;font-size:clamp(20px,3vw,34px)}
  .promo-text{opacity:.95;color: antiquewhite;}
  .promo-cta{display:inline-block;background:#fff;color:#0f172a;text-decoration:none;font-weight:800;border-radius:12px;padding:.55rem 1rem;width:160px;text-align:center}
</style>

<section class="section" aria-labelledby="bnr-title">
  <div class="container">

    <div class="swiper promo-swiper" dir="rtl">
      <div class="swiper-wrapper">
        <% _items.forEach(function(b){ %>
          <div class="swiper-slide">
            <article class="promo-slide">
              <div class="promo-medi"><img src="<%= b.img %>" alt="<%= (b.title||'') %>" loading="lazy"></div>
              <div class="promo-overlay"></div>
              <div class="promo-body">
                <% if (b.title) { %><h3 class="promo-title"><%= b.title %></h3><% } %>
                <% if (b.text)  { %><p class="promo-text"><%= b.text %></p><% } %>
                <% if (b.link)  { %><a class="promo-cta" href="<%= b.link %>"><%= b.btn || 'التفاصيل' %></a><% } %>
              </div>
            </article>
          </div>
        <% }) %>
      </div>

      <div class="swiper-button-prev" aria-label="السابق"></div>
      <div class="swiper-button-next" aria-label="التالي"></div>
      <div class="swiper-pagination"></div>
    </div>
  </div>
</section>
<script>
(function(){
  try{
    if (window.Swiper) {
      new Swiper('.promo-swiper', {
        loop:true,
        centeredSlides:true,
        slidesPerView:1.02,
        spaceBetween:16,
        pagination:{ el:'.promo-swiper .swiper-pagination', clickable:true },
        navigation:{ nextEl:'.promo-swiper .swiper-button-next', prevEl:'.promo-swiper .swiper-button-prev' },
        breakpoints:{ 768:{ slidesPerView:1.05, spaceBetween:18 } }
      });
    }
  }catch(_){}
})();
</script>

<% } %>
