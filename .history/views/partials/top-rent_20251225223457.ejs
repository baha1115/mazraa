<% const list = Array.isArray(items) ? items : []; %>
<section class="section" aria-labelledby="top-rent-title">
  <div class="container">
    <header class="section-header">
      <h3 id="top-rent-title" >Ø£ÙƒØ«Ø± Ù…Ø²Ø§Ø±Ø¹ Ø§Ù„Ø¥ÙŠØ¬Ø§Ø± Ù…Ø´Ø§Ù‡Ø¯Ø©</h3>
    </header>

    <% if (!list.length) { %>
      <p class="muted">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¹Ù†Ø§ØµØ±.</p>
    <% } else { %>
      <style>
        .top-rent-swiper .swiper-slide{ height:auto; }
        .top-rent-card{display:block;border:1px solid #e2e8f0;border-radius:14px;overflow:hidden;background:#fff}
        .top-rent-card img{width:100%;height:220px;object-fit:cover}
        .top-rent-body{padding:.8rem}
        .top-rent-title{margin:.2rem 0 .4rem;font-size:1.05rem ;text-align: center;margin-bottom: 1rem;}
        .top-rent-loc,.top-rent-price{margin:0 0 .25rem;color:#475569}
        .top-rent-meta{font-size:.9rem;color:#475569}
        .top-rent-link{display:inline-block;border:1px solid #0f172a;border-radius:10px;padding:.35rem .7rem;text-decoration:none}
      /* === Rent: Ø¨Ø·Ø§Ù‚Ø§Øª Ø£ØµØºØ± Ø¹Ù„Ù‰ Ø§Ù„Ù‡Ø§ØªÙ + Ù†Ø³Ø¨Ø© 4:3 Ù„Ù„ØµÙˆØ±Ø© === */
.top-rent-card{ border-radius:14px; box-shadow:0 2px 10px rgba(2,6,23,.05); }
.top-rent-media{ position:relative; aspect-ratio:4/3; background:#f5f7f8; }
.top-rent-card img{ width:100% !important; height:100% !important; object-fit:cover !important; }

@media (max-width:640px){
  .top-rent-body{ padding:.6rem !important; }
  .top-rent-title{ font-size:.95rem !important; margin:.15rem 0 .35rem !important; }
  .top-rent-loc,.top-rent-price{ font-size:.84rem !important; margin:0 0 .2rem !important; }
  .top-rent-link{ width:100%; text-align:center; padding:.42rem .75rem !important; font-size:.86rem !important; }
}

      </style>

      <div class="swiper top-rent-swiper" dir="rtl">
        <div class="swiper-wrapper">
          <% list.forEach(f => { %>
            <div class="swiper-slide">
             <article class="farm-card">
  <a class="farm-link" href="/rent/farm/<%= f._id %>">
    <figure class="farm-media">
      <img src="<%= assetPath((f.photos&&f.photos[0])||'/assets/farm-default.jpg') %>" alt="<%= f.title %>">
    </figure>

    <div class="farm-body">
      <h3 class="farm-title"><%= f.title %></h3>
      <p class="farm-location"><%= f.city ? ((f.area||'')+' â€” '+f.city) : (f.area||'â€”') %></p>

      <p class="farm-price">
        <%= (f.currency==='SYP'?'Ù„.Ø³':'$') + Number(f.price||0).toLocaleString('en') %> / Ø´Ù‡Ø±
      </p>

      <span class="meta-views">ğŸ‘ï¸ <%= Number(f.views||0).toLocaleString('en') %></span>
      <span class="btn btn-outline">Ø§Ù„ØªÙØ§ØµÙŠÙ„</span>
    </div>
  </a>
</article>

            </div>
          <% }) %>
        </div>
        <div class="swiper-button-prev" aria-label="Ø§Ù„Ø³Ø§Ø¨Ù‚"></div>
        <div class="swiper-button-next" aria-label="Ø§Ù„ØªØ§Ù„ÙŠ"></div>
        <div class="swiper-pagination"></div>
      </div>

      <script type="module">
        import Swiper from 'https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.mjs';
        new Swiper('.top-rent-swiper', {
          slidesPerView: 1.05,
          spaceBetween: 12,
          watchOverflow: true,
          pagination: { el: '.top-rent-swiper .swiper-pagination', clickable: true },
          navigation: {
            nextEl: '.top-rent-swiper .swiper-button-next',
            prevEl: '.top-rent-swiper .swiper-button-prev'
          },
        breakpoints: {
  0:    { slidesPerView: 2.02, spaceBetween: 10 },  // Ù‡Ø§ØªÙ: ÙƒØ±ØªØ§Ù†
  480:  { slidesPerView: 2.10, spaceBetween: 12 },
  640:  { slidesPerView: 2.4,  spaceBetween: 14 },
  1024: { slidesPerView: 3.2,  spaceBetween: 18 },
  1280: { slidesPerView: 4.2,  spaceBetween: 20 }
}
        });
      </script>
    <% } %>
  </div>
</section>
