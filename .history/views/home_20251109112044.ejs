<!DOCTYPE html>
<html  lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>المزارع - مزارع للبيع والإيجار</title>
  <meta name="description" content="Farmers: List your farm, reach buyers and renters, and grow your business." />
  <link rel="stylesheet" href="../Public/styles/homestyle.css">
  <!-- داخل <head> -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />

</head>
<body>
  <!-- ========================
       1) Header
       ======================== -->


<%- include('partials/navbar') %>
  <!-- Floating WhatsApp Button (position with CSS later) -->
<%- include('partials/whatsapp') %>
<%- include('partials/mobile-nav', { 
  activeTab: 'home',   // غيّرها حسب الصفحة: 'home' | 'sale' | 'rent' | 'contractors' | 'dash'
  isAuth, isAdmin, isContractor, isOwner,
}) %>



  <!-- ========================
     2) Hero Section (Swiper)
     ======================== -->
<section id="hero" class="hero-swiper-section" aria-labelledby="hero-title">
  <% 
    // Slides coming from admin (heroSlides = [{img, title, lead}]):
    const _slides = (Array.isArray(heroSlides) && heroSlides.length) ? heroSlides : [
      { img: '/Public/assests/landscape.jpg',
        title: 'هل لديك مزرعة؟ <span class="accent">انضم الآن</span> وابدأ في عرضه على المشترين والمستأجرين',
        lead: 'قم بإنشاء حساب البائع الخاص بك، وأضف صور المزرعة وتفاصيلها، وتواصل مع المشترين والمستأجرين الحقيقيين بسرعة وسهولة.' },
      { img: '/Public/assests/farm4k1.jpg',
        title: 'اعرض مزرعتك <span class="accent">بأفضل صورة</span>',
        lead: 'حمّل الصور، أضف التفاصيل الدقيقة، ودع المشترين الجادّين يصلون إليك.' },
      { img: '/Public/assests/farm4k1.jpg',
        title: 'فلترة ذكية و <span class="accent">عملاء محتملون</span> بسرعة',
        lead: 'واجهتنا السريعة تساعدك على الوصول للجمهور الصحيح خلال أيام.' }
    ];
  %>

  <div class="swiper hero-swiper" dir="rtl">
    <div class="swiper-wrapper">
      <% _slides.forEach(function(s){ %>
      <div class="swiper-slide">
        <div class="hero hero-slide">
          <figure class="hero-media">
            <img src="<%= s.img %>" alt="" />
            <figcaption class="visually-hidden">شريحة ترويجية</figcaption>
          </figure>

          <div class="hero-layer hero-layer--green" aria-hidden="true" data-parallax depth="0.2"></div>
          <div class="hero-layer hero-layer--yellow" aria-hidden="true" data-parallax depth="0.4"></div>

          <div class="container hero-inner">
            <div class="hero-copy">
              <h1 id="hero-title" class="hero-title"><%- s.title %></h1>
              <p class="hero-lead"><%= s.lead %></p>

              <!-- الأزرار تبقى ثابتة كما طلبت -->
              <div class="hero-actions">
                <a class="btn btn-primary" href="/signup">سجل الآن كبائع</a>
                <a class="btn btn-outline" href="/sale">اكتشف المزارع</a>
              </div>
            </div>
          </div>
        </div>
      </div>
      <% }) %>
    </div>

    <!-- تحكم سويبر -->
    <div class="swiper-button-prev" aria-label="السابق"></div>
    <div class="swiper-button-next" aria-label="التالي"></div>
    <div class="swiper-pagination"></div>
  </div>
</section>

<!-- ===== Quick-links cards (قبل الاشتراكات) ===== -->
<%
// مساعد بسيط لتطبيع المسارات
function assetPath(u){
  u = (u||'').toString().trim();
  if (!u) return '/Public/assests/farm4k1.jpg';
  if (/^https?:\/\//i.test(u) || /^data:/i.test(u)) return u;
  return u.replace(/^\/?Public\//,'/Public/'); // أبقي نفس تنظيمك
}

const _ql = quickLinks || {};
const _saleImg   = assetPath(_ql.saleImg        || '/Public/assests/farm4k1.jpg');
const _rentImg   = assetPath(_ql.rentImg        || '/Public/assests/farm4k1.jpg');
const _contImg   = assetPath(_ql.contractorsImg || '/Public/assests/farm4k1.jpg');
%>

<section id="quick-links" class="section quick-links" aria-labelledby="quick-links-title">
  <div class="container">
    <h2 id="quick-links-title" class="section-title" style="text-align: center;">تصفح الأقسام الشائعة</h2>

    <div class="cards-row" role="list">
      <!-- Card 1: مزارع للبيع -->
      <article class="ql-card" role="listitem">
        <a class="ql-link" href="/sale" aria-label="اذهب إلى مزارع للبيع">
          <div class="ql-media">
            <img src="<%= _saleImg %>" alt="مزارع للبيع" loading="lazy" />
            <div class="ql-badge">مزارع للبيع</div>
          </div>
        </a>
      </article>

      <!-- Card 2: مزارع للإيجار -->
      <article class="ql-card" role="listitem">
        <a class="ql-link" href="/rent" aria-label="اذهب إلى مزارع للإيجار">
          <div class="ql-media">
            <img src="<%= _rentImg %>" alt="مزارع للإيجار" loading="lazy" />
            <div class="ql-badge">مزارع للإيجار</div>
          </div>
        </a>
      </article>

      <!-- Card 3: المقاولون -->
      <article class="ql-card" role="listitem">
        <a class="ql-link" href="/contractors" aria-label="اذهب إلى المقاولون">
          <div class="ql-media">
            <img src="<%= _contImg %>" alt="المقاولون" loading="lazy" />
            <div class="ql-badge">المقاولون</div>
          </div>
        </a>
      </article>
    </div>
  </div>
</section>
<% function _cards(items){ 
     return (items||[]).slice().sort((a,b)=>(a.order||0)-(b.order||0)).slice(0,3);
   } %>

<% if (rentTop && rentTop.enabled && _cards(rentTop.items).length) { %>
<section class="section" aria-labelledby="rentTop-title">
  <div class="container">
    <h2 id="rentTop-title" class="section-title" style="text-align: center;margin-bottom:1rem;"> <%= rentTop.title || 'أجمل المزارع للإيجار' %> </h2>
    <div class="swiper rentTop-swiper" dir="rtl">
      <div class="swiper-wrapper">
        <% _cards(rentTop.items).forEach(function(it){ %>
          <div class="swiper-slide">
            <article class="hero-card" style="position:relative;min-height:260px;border-radius:16px;overflow:hidden">
              <img src="<%= it.img %>" alt="" style="position:absolute;inset:0;width:100%;height:100%;object-fit:cover">
              <div class="overlay" style="position:absolute;inset:0;background:linear-gradient(90deg,rgba(0,0,0,.45),rgba(0,0,0,.15) 50%,transparent)"></div>
              <div class="card-body" style="position:absolute;top:50%;left:50%;transform:translate(-50% ,-50%) ;display:flex;flex-direction:column;align-items:center;justify-content:center; color:#fff;padding:1rem;width:100%;height:100%;">
                <h3 style="margin:0 0 .35rem"><%= it.title %></h3>
                <p class="muted" style="opacity:.95;color:whitesmoke"><%= it.desc %></p>
                <a class="btn btn-primary" href="<%= it.link||'#' %>" style="margin-top:.6rem;display:inline-block">التفاصيل</a>
              </div>
            </article>
          </div>
        <% }) %>
      </div>
      <div class="swiper-button-prev" aria-label="السابق"></div>
      <div class="swiper-button-next" aria-label="التالي"></div>
      <div class="swiper-pagination"></div>
    </div>
  </div>
</section>
<% } %>

<% if (saleTop && saleTop.enabled && _cards(saleTop.items).length) { %>
<section class="section" aria-labelledby="saleTop-title">
  <div class="container">
    <h2 id="saleTop-title" class="section-title" style="text-align: center;margin-bottom:1rem;"> <%= saleTop.title || 'أجمل المزارع للبيع' %> </h2>
    <div class="swiper saleTop-swiper" dir="rtl">
      <div class="swiper-wrapper">
        <% _cards(saleTop.items).forEach(function(it){ %>
          <div class="swiper-slide">
            <!-- نفس تركيب الكرت -->
            <article class="hero-card" style="position:relative;min-height:260px;border-radius:16px;overflow:hidden">
              <img src="<%= it.img %>" alt="" style="position:absolute;inset:0;width:100%;height:100%;object-fit:cover">
              <div class="overlay" style="position:absolute;inset:0;background:linear-gradient(90deg,rgba(0,0,0,.45),rgba(0,0,0,.15) 50%,transparent)"></div>
              <div class="card-body" style="position:absolute;top:50%;left:50%;transform:translate(-50% ,-50%) ;display:flex;flex-direction:column;align-items:center;justify-content:center; color:#fff;padding:1rem;width:100%;height:100%;">
                <h3 style="margin:0 0 .35rem"><%= it.title %></h3>
                <p class="muted" style="opacity:.95;color:whitesmoke"><%= it.desc %></p>
                <a class="btn btn-primary" href="<%= it.link||'#' %>" style="margin-top:.6rem;display:inline-block">التفاصيل</a>
              </div>
            </article>
          </div>
        <% }) %>
      </div>
      <div class="swiper-button-prev" aria-label="السابق"></div>
      <div class="swiper-button-next" aria-label="التالي"></div>
      <div class="swiper-pagination"></div>
    </div>
  </div>
</section>
<% } %>

<% if (bestContractors && bestContractors.enabled && _cards(bestContractors.items).length) { %>
<section class="section" aria-labelledby="bestContractors-title">
  <div class="container">
    <h2 id="bestContractors-title" class="section-title" style="text-align: center;margin-bottom:1rem;"> <%= bestContractors.title || 'أفضل المقاولين' %> </h2>
    <div class="swiper bestContractors-swiper" dir="rtl">
      <div class="swiper-wrapper">
        <% _cards(bestContractors.items).forEach(function(it){ %>
          <div class="swiper-slide">
            <!-- نفس الكرت -->
            <article class="hero-card" style="position:relative;min-height:260px;border-radius:16px;overflow:hidden">
              <img src="<%= it.img %>" alt="" style="position:absolute;inset:0;width:100%;height:100%;object-fit:cover">
              <div class="overlay" style="position:absolute;inset:0;background:linear-gradient(90deg,rgba(0,0,0,.45),rgba(0,0,0,.15) 50%,transparent)"></div>
              <div class="card-body" style="position:absolute;top:50%;left:50%;transform:translate(-50% ,-50%) ;display:flex;flex-direction:column;align-items:center;justify-content:center; color:#fff;padding:1rem;width:100%;height:100%;">
                <h3 style="margin:0 0 .35rem"><%= it.title %></h3>
                <p class="muted" style="opacity:.95;color:whitesmoke"><%= it.desc %></p>
                <a class="btn btn-primary" href="<%= it.link||'#' %>" style="margin-top:.6rem;display:inline-block">التفاصيل</a>
              </div>
            </article>
          </div>
        <% }) %>
      </div>
      <div class="swiper-button-prev" aria-label="السابق"></div>
      <div class="swiper-button-next" aria-label="التالي"></div>
      <div class="swiper-pagination"></div>
    </div>
  </div>
</section>
<% } %>

  
  <!-- ========================
       4) Efficiency, Skills & Experience
       ======================== -->
 <section id="metrics" class="section metrics" aria-labelledby="metrics-title">
  <div class="container metrics-inner">
    <div class="metrics-copy">
      <h2 id="metrics-title">كفاءتنا ومهاراتنا وخبرتنا</h2>
      <p class="muted">
        نجمع بين الخبرة السوقية والتقنيات الحديثة لنقدم أداءً لا مثيل له
        للبائعين والمشترين في جميع أنحاء المنطقة.
      </p>

      <ul class="kpi-grid" role="list">
        <li class="kpi" role="listitem">
          <span class="kpi-icon" aria-hidden="true">✓</span>
          <div class="kpi-info">
            <p class="kpi-label">متوسط الوقت لأول عميل محتمل</p>
            <p class="kpi-value" data-counter="48">48 ساعة</p>
          </div>
        </li>
        <li class="kpi" role="listitem">
          <span class="kpi-icon" aria-hidden="true">✓</span>
          <div class="kpi-info">
            <p class="kpi-label">شركاء موثوقون</p>
            <p class="kpi-value" data-counter="120">+120</p>
          </div>
        </li>
        <li class="kpi" role="listitem">
          <span class="kpi-icon" aria-hidden="true">✓</span>
          <div class="kpi-info">
            <p class="kpi-label">رضا العملاء</p>
            <p class="kpi-value" data-counter="96">96%</p>
          </div>
        </li>
        <li class="kpi" role="listitem">
          <span class="kpi-icon" aria-hidden="true">✓</span>
          <div class="kpi-info">
            <p class="kpi-label">المدن المشمولة</p>
            <p class="kpi-value" data-counter="20">+20</p>
          </div>
        </li>
      </ul>
    </div>
</section>
  <!-- ========================
       5) Testimonials (Customers’ Opinions)
       ======================== -->
<div class="swiper testimonials-swiper" dir="rtl" aria-roledescription="carousel">
  <div class="swiper-wrapper">
    <div class="swiper-slide" style="height: 40vh;">
      <article class="testimonial" role="group" aria-label="تقييم 1" style="height:90%;" >
        <!-- نفس محتوى البطاقة الأولى كما هو -->
         <header class="testimonial-head">
          <img src="../Public/assests/pumpmen.webp" alt="">
          <div>
            <strong id="t1-name">أجمد العظمة</strong>
            <div class="testimonial-role">بائع مزرعة، حمص</div>
             <div class="stars" aria-label="5 نجوم">★★★★★</div>
          </div>
         
        </header>
        <blockquote class="testimonial-quote">
          “فارمرز سهّل عليّ عملية إدراج مزرعتي. حصلت على عملاء محتملين بجودة عالية خلال أيام!”
        </blockquote>
      </article>
    </div>
    <div class="swiper-slide" style="height: 40vh;">
      <article class="testimonial" role="group" aria-label="تقييم 2" style="height:90%;">
        <!-- نفس محتوى البطاقة الثانية كما هو -->
         <header class="testimonial-head">
          <img src="../Public/assests/electrician.jpg" alt="">
          <div>
            <strong id="t2-name">امين مراش</strong>
            <div class="testimonial-role">مشتري، حماة</div>
            <div class="stars" aria-label="5 نجوم">★★★★★</div>
          </div>
          
        </header>
        <blockquote class="testimonial-quote">
          “أعجبتني الواجهة البسيطة والفلاتر السريعة. وجدت الأرض المثالية خلال أسبوع واحد فقط.”
        </blockquote>


      </article>
    </div>
    <div class="swiper-slide" style="height: 40vh;">
      <article class="testimonial" role="group" aria-label="تقييم 3" style="height:90%;">
        <!-- نفس محتوى البطاقة الثالثة كما هو -->
          <header class="testimonial-head">
          <img src="../Public/assests/men.webp" alt="">
          <div>
            <strong id="t3-name">علي المرادي</strong>
            <div class="testimonial-role">شريكة وكالة</div>
            <div class="stars" aria-label="4 نجوم">★★★★☆</div>
          </div>
          
        </header>
        <blockquote class="testimonial-quote">
          “التحليلات المميزة ساعدتنا على تسعير العقار بشكل صحيح والبيع أسرع. أوصي به بشدة.”
        </blockquote>


      </article>
    </div>
  </div>

  <!-- تحكم -->
  <div class="swiper-button-prev" aria-label="السابق"></div>
  <div class="swiper-button-next" aria-label="التالي"></div>
  <div class="swiper-pagination"></div>
</div>

<%- include('partials/footer') %>
<!-- قبل إغلاق </body> مباشرة -->
<script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
  <script src="../Public/homejava.js"></script>
  <script>
  document.addEventListener('DOMContentLoaded', function(){
    new Swiper('.testimonials-swiper', {
      direction: 'horizontal',
      rtl: true,
      spaceBetween: 16,
      slidesPerView: 1.05,
      centeredSlidesBounds: true,
      watchOverflow: true,
      pagination: { el: '.testimonials-swiper .swiper-pagination', clickable: true },
      navigation: {
        nextEl: '.testimonials-swiper .swiper-button-next',
        prevEl: '.testimonials-swiper .swiper-button-prev'
      },
      breakpoints: {
        640:  { slidesPerView: 1.2, spaceBetween: 18 },
        900:  { slidesPerView: 2.1, spaceBetween: 20 },
        1200: { slidesPerView: 3.1, spaceBetween: 22 }
      }
    });
  });
</script>
<script>
  document.addEventListener('DOMContentLoaded', function () {
    // Hero Swiper
    new Swiper('.hero-swiper', {
      loop: true,
      speed: 650,
      spaceBetween: 0,
      slidesPerView: 1,
      watchOverflow: true,
      autoplay: { delay: 4500, disableOnInteraction: false },
      pagination: { el: '.hero-swiper .swiper-pagination', clickable: true },
      navigation: {
        nextEl: '.hero-swiper .swiper-button-next',
        prevEl: '.hero-swiper .swiper-button-prev',
      },
    });
  });
</script>
<script>
  const mk = sel => new Swiper(sel, {
    slidesPerView: 1.02, spaceBetween: 16,
    pagination:{ el: sel+' .swiper-pagination', clickable:true },
    navigation:{ nextEl: sel+' .swiper-button-next', prevEl: sel+' .swiper-button-prev' },
    breakpoints:{ 640:{slidesPerView:1.2}, 1024:{slidesPerView:2.2}, 1280:{slidesPerView:3.2} }
  });
  document.addEventListener('DOMContentLoaded', ()=>{
    ['.rentTop-swiper','.saleTop-swiper','.bestContractors-swiper'].forEach(s=>{
      if(document.querySelector(s)) mk(s);
    });
  });
</script>
</body>
</html>
